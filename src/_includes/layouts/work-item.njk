{% extends "layouts/base.njk" %}
{% block content %}
  <div class="wrapper py-4">
    <div id="hero" class="grid gap-6 md:grid-cols-2 -mx-5 px-5 bg-{{ color }}-500 bg-opacity-20">
      <div class="flex flex-col justify-center">
        <h1>{{ title }}</h1>
        <p class="font-display text-2xl text-blueGray-700 dark:text-gray-400 mb-5">{{ summary }}</p>
        {% if roles %}
          {% if roles.length > 1 %}
            {% set text = "Roles" %}
          {% else %}
            {% set text = "Role" %}
          {% endif %}
          <p class="text-lg">
            <strong class="inline-block px-2 py-1 me-2 bg-blueGray-900 dark:bg-gray-50 text-white dark:text-gray-900">{{ text }}</strong>
            {% for item in roles %}
              <span>{{ item }}</span>
              {% if not loop.last %}
                |
              {% endif %}
            {% endfor %}
          </p>
        {% endif %}
      </div>
      <img src="{{ hero.image }}" alt="{{ hero.imageAlt }}">
    </div>
  </div>
  <div class="wrapper">
    <div class="keyFeatures my-8 md:my-28">
      <h2>Key Features</h2>
      {% set orderImg = cycler("md:order-1", "md:order-2") %}
      {% set orderCapt = cycler("md:order-2", "md:order-1") %}
      {% set textDir = cycler("md:text-right", "md:text-left") %}
      {% for feature in keyFeatures %}
        <div class="keyFeatures__item mb-6 md:mb-16">
          <figure class="grid gap-6 md:grid-cols-2 lg:grid-cols-5">
            <img src="{{ feature.image }}" alt="{{ feature.imageAlt }}" loading="lazy" class="{{ orderImg.next() }} lg:col-span-3">
            <figcaption class="{{ orderCapt.next() }} md:pt-20 lg:col-span-2">
              <h3 class="text-4xl md:text-6xl leading-snug {{ textDir.next() }}">{{ feature.title }}</h3>
              <p class="text-xl text-blueGray-700 dark:text-gray-400">{{ feature.summary }}</p>
            </figcaption>
          </figure>
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="wrapper">
    <div class="grid md:grid-cols-3 my-8 md:my-28 divide-y-2 md:divide-y-0 md:divide-x-2 divide-blueGray-600 dark:divide-gray-400">
      {% for stat in stats %}
        <div class="px-16 py-12">
          <p class="text-8xl font-display text-blueGray-900 dark:text-gray-50">
            <strong>{{ stat.main }}</strong>
          </p>
          <p class="text-2xl text-blueGray-700 dark:text-gray-400">{{ stat.sub }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="wrapper">
    <div class="grid gap-4 md:gap-6 md:grid-cols-2 lg:grid-cols-3 my-8 md:my-28">
      {% for item in gallery %}
        <figure id="gallery__item-{{ loop.index }}" class="gallery__item cursor-pointer" data-galleryID="{{ loop.index }}">
          <div class="gallery__item__imgCont aspect-w-1 aspect-h-1 w-full h-0">
            <img src="{{ item.image }}" alt="{{ item.imageAlt }}" loading="lazy" class="object-cover w-full h-full">
            <div class="expand w-20 h-20 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-blueGray-100 dark:text-gray-50 z-20 opacity-0 transition-opacity">
              {% include "icons/expand.svg" %}
            </div>
          </div>
          <figcaption class="mt-3">
            <p>{{ item.summary }}</p>
          </figcaption>
        </figure>
      {% endfor %}
    </div>
  </div>
  <div class="wrapper">
    <div class="content">
      {% set contentHeading = 'Case Study' %}
      {% if contentTitle %}
        {% set contentHeading = contentTitle %}
      {% endif %}
      <h2>{{ contentHeading }}</h2>
      {{ content | safe }}
    </div>
  </div>
  <div id="lightbox" class="hidden items-center justify-center fixed top-0 left-0 h-screen w-screen px-5 bg-blueGray-900 dark:bg-gray-900 bg-opacity-90 dark:bg-opacity-90 z-40">
    <div class="close w-12 h-12 absolute top-8 right-8 text-blueGray-100 z-20 cursor-pointer">
      {% include "icons/close.svg" %}
    </div>
    <div id="lightbox__prev" class="w-12 h-12 flex-shrink-0 text-blueGray-100 dark:text-gray-50 cursor-pointer">
      {% include "icons/chevron-left.svg" %}
    </div>
    <div class="lightbox__media flex max-h-3/4 flex-shrink">
      {% for item in gallery %}
        <figure id="lightbox__item-{{ loop.index }}" class="lightbox__item hidden max-h-full" data-lightboxID="{{ loop.index }}">
          <img src="{{ item.image }}" alt="{{ item.imageAlt }}" loading="lazy" class="object-contain">
          <figcaption class="text-xl text-center text-white dark:text-gray-50 mt-3">
            <p>{{ item.summary }}</p>
          </figcaption>
        </figure>
      {% endfor %}
    </div>
    <div id="lightbox__next" class="w-12 h-12 flex-shrink-0 text-blueGray-100 dark:text-gray-50 cursor-pointer">
      {% include "icons/chevron-right.svg" %}
    </div>
  </div>
{% endblock %}